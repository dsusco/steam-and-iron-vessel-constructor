import{o as n,c as s,a,t as p,b as y,F as f,r as C,u as o,d as k,w,i as q,e as d,n as z,f as F,g as x,h as E,p as V,j,k as D,l as K,s as X}from"./index-638e277d.js";import{u as M,F as U,W as Y,A,E as I,a as T,H as Z,S as J}from"./weapon-offensive-potential-6f513e80.js";import{u as B,C as G,a as Q,b as ee,c as te,d as N,e as ne}from"./vessels-store-6f680c05.js";import{u as ae,_ as ie}from"./eccentricities-5dee32a3.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const le=["value"],se=a("option",{value:""},null,-1),re=["value"],ue={__name:"VesselBattery",props:{label:{type:String,required:!0},weaponId:{type:String}},emits:["update:weaponId"],setup(e,{emit:r}){const t=M();return(m,R)=>(n(),s("fieldset",null,[a("legend",null,p(e.label),1),a("label",null,[y(" Weapon "),a("select",{value:e.weaponId,onChange:R[0]||(R[0]=g=>r("update:weaponId",g.target.value))},[se,(n(!0),s(f,null,C(o(t).weapons,(g,u)=>(n(),s("option",{key:u,value:u},p(g.name||u),9,re))),128))],40,le)])]))}};function oe(e,r,t,m){const R=k(null);return w(()=>{const g=t.value?U.indexOf(t.value.firingArcs[e.value][r.value]):0,u=m.value?U.indexOf(m.value.firingArcs[e.value][r.value])+1:U.length;R.value=U.slice(g,u)}),{firingArcGamut:R}}const de=["value"],ce={__name:"VesselConditionFiringDiagramArc",props:{battery:{type:String,required:!0},label:{type:String,required:!0},weapons:{type:String,required:!0}},emits:["update:weapons"],setup(e,{emit:r}){const t=e,{firingArcGamut:m}=oe(d(t,"battery"),d(t,"label"),q("nextCondition"),q("prevCondition"));return(R,g)=>(n(),s("label",{class:z(`arc _${e.label.toLowerCase().replace(/\s+/g,"_")}`)},[y(p(e.label)+" ",1),a("select",{value:e.weapons,onChange:g[0]||(g[0]=u=>r("update:weapons",u.target.value))},[(n(!0),s(f,null,C(o(m),u=>(n(),s("option",{key:u},p(u),1))),128))],40,de)],2))}};const ge={key:0,class:"firing_diagram"},pe={__name:"VesselConditionFiringDiagram",props:{firingArcs:{type:Object,required:!0},label:{type:String,required:!0}},setup(e){const r=e,t=F(()=>M().weapons[q("batteries").value[r.label].weaponId]);return(m,R)=>t.value?(n(),s("fieldset",ge,[a("legend",null,p(e.label)+" ("+p(t.value.name)+")",1),(n(!0),s(f,null,C(o(Y)[t.value.type].firingArcs,g=>(n(),x(ce,{key:g,battery:e.label,label:g,weapons:e.firingArcs[g],"onUpdate:weapons":u=>e.firingArcs[g]=u},null,8,["battery","label","weapons","onUpdate:weapons"]))),128))])):E("",!0)}},me=O(pe,[["__scopeId","data-v-ea6aa56a"]]);function Re(e,r){const t=k(null);return w(()=>{const m=e.value?A.indexOf(e.value.armorRating):0,R=r.value?A.indexOf(r.value.armorRating)+1:A.length;t.value=A.slice(m,R)}),{armorRatingGamut:t}}function H(e,r=k(null),t=k(null)){const{classification:m}=B(e),R=k(null),g=k(null);return w(()=>{try{R.value=I.slice(0,G[m.value][e.value].maximumEngineRating+1)}catch{}}),w(()=>{try{const u=r.value?I.indexOf(r.value.engineRating):0,l=t.value?I.indexOf(t.value.engineRating):G[m.value][e.value].maximumEngineRating;g.value=I.slice(u,l+1)}catch{}}),{engineRatingGamut:g,smallCraftEngineRatingGamut:R}}const ve=e=>(j("data-v-9cdd1bc5"),e=e(),D(),e),be=["value"],fe=["value"],Ce=["value"],ye=ve(()=>a("legend",null,"Firing Arcs",-1)),he={__name:"VesselCondition",props:{label:{type:String,required:!0},hullCheckboxes:{type:Number,required:!0},nextCondition:Object,prevCondition:Object,type:{type:String,required:!0},engineRating:{type:String,required:!0},armorRating:{type:String,required:!0},firingArcs:{type:Object,required:!0}},emits:["update:engineRating","update:armorRating"],setup(e,{emit:r}){const t=e,{armorRatingGamut:m}=Re(d(t,"nextCondition"),d(t,"prevCondition")),{engineRatingGamut:R}=H(d(t,"type"),d(t,"nextCondition"),d(t,"prevCondition"));return V("nextCondition",d(t,"nextCondition")),V("prevCondition",d(t,"prevCondition")),(g,u)=>e.hullCheckboxes?(n(),s("fieldset",{key:0,class:z(`condition _${e.label.toLowerCase().replace(/\s+/g,"_")}`)},[a("legend",null,p(e.label),1),a("label",null,[y(" Hull Checkboxes "),a("input",{disabled:"",value:e.hullCheckboxes},null,8,be)]),a("label",null,[y(" Engine Rating "),a("select",{value:e.engineRating,onChange:u[0]||(u[0]=l=>r("update:engineRating",l.target.value))},[(n(!0),s(f,null,C(o(R),l=>(n(),s("option",{key:l},p(l),1))),128))],40,fe)]),a("label",null,[y(" Armor Rating "),a("select",{value:e.armorRating,onChange:u[1]||(u[1]=l=>r("update:armorRating",l.target.value))},[(n(!0),s(f,null,C(o(m),l=>(n(),s("option",{key:l},p(l),1))),128))],40,Ce)]),a("fieldset",null,[ye,(n(!0),s(f,null,C(e.firingArcs,(l,_)=>(n(),x(me,{key:_,firingArcs:l,label:_},null,8,["firingArcs","label"]))),128))])],2)):E("",!0)}},_e=O(he,[["__scopeId","data-v-9cdd1bc5"]]);const L=e=>(j("data-v-f441fa1d"),e=e(),D(),e),ke={class:"vessel"},xe=["value"],Ae=["disabled","value"],Se=["label"],Ue={class:"vessel_eccentricities"},Ie=L(()=>a("legend",null,"Eccentricities",-1)),we={class:"vessel_batteries"},Ee=L(()=>a("legend",null,"Batteries",-1)),qe={key:0,class:"vessel_conditions"},Ve=["value"],Ge={key:1,class:"small_craft_values"},Oe=["value"],$e=["value"],Te=["value"],Ne={__name:"Vessel",props:{id:{type:String,required:!0},klass:{type:String,required:!0},type:{type:String,required:!0},eccentricities:{type:Array,required:!0},batteries:{type:Object,required:!0},hullRating:{type:String,required:!0},conditions:{type:Object,required:!0},sizeCheckboxes:{type:String,required:!0},engineRating:{type:String,required:!0},armorRating:{type:String,required:!0}},emits:["remove:vessel","update:klass","update:type","update:hullRating","update:sizeCheckboxes","update:engineRating","update:armorRating"],setup(e,{emit:r}){const t=e,{classification:m,isColossal:R,isSmallCraft:g}=B(d(t,"type")),{defensiveRating:u}=Q(d(t,"type"),d(t,"hullRating"),d(t,"conditions"),d(t,"sizeCheckboxes"),d(t,"armorRating"),d(t,"eccentricities")),{enabledEccentricities:l,toggleEccentricity:_}=ae(K(t),T.Vessel),{smallCraftEngineRatingGamut:c}=H(d(t,"type")),{hullCheckboxes:W}=ee(d(t,"hullRating")),{offensiveRating:$}=te(d(t,"hullRating"),d(t,"batteries"),d(t,"conditions")),P=F(()=>Math.round(Math.sqrt($.value*u.value)));return V("batteries",d(t,"batteries")),(Fe,v)=>(n(),s("fieldset",ke,[a("legend",null,p(e.klass||e.id),1),a("label",null,[y(" Class "),a("input",{value:e.klass,onInput:v[0]||(v[0]=i=>r("update:klass",i.target.value))},null,40,xe)]),a("label",null,[y(" Type "),a("select",{disabled:e.eccentricities.length,value:e.type,onChange:v[1]||(v[1]=i=>r("update:type",i.target.value))},[(n(!0),s(f,null,C(o(G),(i,b)=>(n(),s("optgroup",{key:b,label:b},[(n(!0),s(f,null,C(i,(h,S)=>(n(),s("option",{key:S},p(S),1))),128))],8,Se))),128))],40,Ae)]),a("button",{type:"button",onClick:v[2]||(v[2]=i=>r("remove:vessel",e.id))},"Ã—"),a("span",null,"DRAT: "+p(o(u)),1),a("span",null,"ORAT: "+p(o($)),1),a("span",null,"CRAT: "+p(P.value),1),a("fieldset",Ue,[Ie,(n(!0),s(f,null,C(o(T).Vessel,(i,b)=>(n(),x(ie,{key:b,abbr:b,checked:e.eccentricities.includes(b),disabled:!o(l)[b],eccentricity:i,"onUpdate:eccentricity":v[3]||(v[3]=(h,S)=>o(_)(h,S))},null,8,["abbr","checked","disabled","eccentricity"]))),128))]),a("fieldset",we,[Ee,(n(!0),s(f,null,C(e.batteries,(i,b)=>(n(),x(ue,{key:b,label:b,weaponId:i.weaponId,"onUpdate:weaponId":h=>i.weaponId=h},null,8,["label","weaponId","onUpdate:weaponId"]))),128))]),o(R)?(n(),s("fieldset",qe,[a("legend",null,p(o(m)),1),a("label",null,[y(" Hull Rating "),a("select",{value:e.hullRating,onChange:v[4]||(v[4]=i=>r("update:hullRating",i.target.value))},[(n(!0),s(f,null,C(o(Z),i=>(n(),s("option",{key:i},p(i),1))),128))],40,Ve)]),(n(!0),s(f,null,C(e.conditions,(i,b)=>(n(),x(_e,{key:b,label:b,hullCheckboxes:o(W)[b],nextCondition:e.conditions[o(N)[b].nextCondition],prevCondition:e.conditions[o(N)[b].prevCondition],type:e.type,engineRating:i.engineRating,"onUpdate:engineRating":h=>i.engineRating=h,armorRating:i.armorRating,"onUpdate:armorRating":h=>i.armorRating=h,firingArcs:i.firingArcs,"onUpdate:firingArcs":h=>i.firingArcs=h},null,8,["label","hullCheckboxes","nextCondition","prevCondition","type","engineRating","onUpdate:engineRating","armorRating","onUpdate:armorRating","firingArcs","onUpdate:firingArcs"]))),128))])):E("",!0),o(g)?(n(),s("fieldset",Ge,[a("legend",null,p(o(m)),1),a("label",null,[y(" Size Checkboxes "),a("select",{value:e.sizeCheckboxes,onChange:v[5]||(v[5]=i=>r("update:sizeCheckboxes",i.target.value))},[(n(!0),s(f,null,C(o(J),i=>(n(),s("option",{key:i},p(i),1))),128))],40,Oe)]),a("label",null,[y(" Engine Rating "),a("select",{value:e.engineRating,onChange:v[6]||(v[6]=i=>r("update:engineRating",i.target.value))},[(n(!0),s(f,null,C(o(c),i=>(n(),s("option",{key:i},p(i),1))),128))],40,$e)]),a("label",null,[y(" Armor Rating "),a("select",{value:e.armorRating,onChange:v[7]||(v[7]=i=>r("update:armorRating",i.target.value))},[(n(!0),s(f,null,C(o(A),i=>(n(),s("option",{key:i},p(i),1))),128))],40,Te)])])):E("",!0)]))}},ze=O(Ne,[["__scopeId","data-v-f441fa1d"]]),Le={__name:"VesselsView",setup(e){const r=ne(),{addVessel:t,removeVessel:m}=r,{vessels:R}=X(r);return(g,u)=>(n(),s("main",null,[a("div",null,[a("button",{onClick:u[0]||(u[0]=l=>o(t)())},"Add Vessel")]),(n(!0),s(f,null,C(o(R),(l,_)=>(n(),x(ze,{key:_,id:_,klass:l.klass,"onUpdate:klass":c=>l.klass=c,type:l.type,"onUpdate:type":c=>l.type=c,eccentricities:l.eccentricities,"onUpdate:eccentricities":c=>l.eccentricities=c,batteries:l.batteries,"onUpdate:batteries":c=>l.batteries=c,hullRating:l.hullRating,"onUpdate:hullRating":c=>l.hullRating=c,conditions:l.conditions,"onUpdate:conditions":c=>l.conditions=c,sizeCheckboxes:l.sizeCheckboxes,"onUpdate:sizeCheckboxes":c=>l.sizeCheckboxes=c,engineRating:l.engineRating,"onUpdate:engineRating":c=>l.engineRating=c,armorRating:l.armorRating,"onUpdate:armorRating":c=>l.armorRating=c,"onRemove:vessel":c=>o(m)(c)},null,8,["id","klass","onUpdate:klass","type","onUpdate:type","eccentricities","onUpdate:eccentricities","batteries","onUpdate:batteries","hullRating","onUpdate:hullRating","conditions","onUpdate:conditions","sizeCheckboxes","onUpdate:sizeCheckboxes","engineRating","onUpdate:engineRating","armorRating","onUpdate:armorRating","onRemove:vessel"]))),128))]))}};export{Le as default};
