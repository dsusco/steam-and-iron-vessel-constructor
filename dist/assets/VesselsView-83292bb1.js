import{a as computed,o as openBlock,c as createElementBlock,b as createBaseVNode,t as toDisplayString,d as createTextVNode,w as withDirectives,v as vModelSelect,F as Fragment,r as renderList,u as unref,e as createCommentVNode,i as inject,n as normalizeClass,f as createBlock,p as provide,g as pushScopeId,h as popScopeId,j as vModelText,k as ref}from"./index-babcb7e0.js";import{u as useWeaponsStore,F as FIRING_ARC_GAMUT,W as WEAPON_TYPES,A as ARMOR_RATING_GAMUT,E as ENGINE_RATING_GAMUT,a as ECCENTRICITIES,H as HULL_RATING_GAMUT,S as SIZE_CHECKBOXES_GAMUT}from"./weapons-store-104cfc15.js";import{C as CLASSIFICATIONS,a as CONDITIONS,u as useVesselsStore}from"./vessels-store-402e4bef.js";import{_ as _export_sfc}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as _sfc_main$6}from"./EccentricityComp-2068d545.js";const _hoisted_1$4=createBaseVNode("option",{value:""},null,-1),_hoisted_2$2=["value"],_hoisted_3$2={key:0},_sfc_main$5={__name:"BatteryComp",props:{battery:{type:Object,required:!0},label:{type:String,required:!0}},setup(e){const s=e,o=useWeaponsStore(),a=computed(()=>o.weapons[s.battery.weapon]);return(c,i)=>(openBlock(),createElementBlock("fieldset",null,[createBaseVNode("legend",null,toDisplayString(e.label),1),createBaseVNode("label",null,[createTextVNode(" Weapon "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":i[0]||(i[0]=n=>e.battery.weapon=n)},[_hoisted_1$4,(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o).weapons,(n,l)=>(openBlock(),createElementBlock("option",{value:l},toDisplayString(n.name||l),9,_hoisted_2$2))),256))],512),[[vModelSelect,e.battery.weapon]])]),a.value?(openBlock(),createElementBlock("div",_hoisted_3$2,[createTextVNode(toDisplayString(a.value.name)+" ("+toDisplayString(a.value.type)+") ",1),createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value.eccentricities,(n,l)=>(openBlock(),createElementBlock("span",{key:l},toDisplayString(n),1))),128))]),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value.rangeBands,(n,l)=>(openBlock(),createElementBlock("div",{key:l},toDisplayString(n.minimumRange)+"–"+toDisplayString(n.maximumRange)+": "+toDisplayString(n.rateOfFire)+"@"+toDisplayString(n.accuracy)+"/"+toDisplayString(n.damage)+"("+toDisplayString(n.penetration)+") ",1))),128))])):createCommentVNode("",!0)]))}},_hoisted_1$3=["value"],_sfc_main$4={__name:"FiringArcComp",props:{battery:{type:String,required:!0},label:{type:String,required:!0},weapons:{type:String,required:!0}},setup(e){const s=e,o=inject("nextCondition"),a=inject("prevCondition"),c=computed(()=>{const i=o.value?FIRING_ARC_GAMUT.indexOf(o.value.firingArcs[s.battery][s.label]):0,n=a.value?FIRING_ARC_GAMUT.indexOf(a.value.firingArcs[s.battery][s.label])+1:FIRING_ARC_GAMUT.length;return FIRING_ARC_GAMUT.slice(i,n)});return(i,n)=>(openBlock(),createElementBlock("label",{class:normalizeClass(`arc _${e.label}`)},[createTextVNode(toDisplayString(e.label)+" ",1),createBaseVNode("select",{value:e.weapons,onChange:n[0]||(n[0]=l=>i.$emit("update:firingArc",l.target.value))},[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.value,l=>(openBlock(),createElementBlock("option",{key:l},toDisplayString(l),1))),128))],40,_hoisted_1$3)],2))}},FiringDiagramComp_vue_vue_type_style_index_0_scoped_987af6f5_lang="",_hoisted_1$2={key:0,class:"firing_diagram"},_sfc_main$3={__name:"FiringDiagramComp",props:{firingArcs:{type:Object,required:!0},label:{type:String,required:!0}},setup(e){const s=e,o=inject("batteries"),a=computed(()=>useWeaponsStore().weapons[o.value[s.label].weapon]);return(c,i)=>a.value?(openBlock(),createElementBlock("fieldset",_hoisted_1$2,[createBaseVNode("legend",null,toDisplayString(e.label)+" ("+toDisplayString(a.value.name)+")",1),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(WEAPON_TYPES)[a.value.type].firingArcs,n=>(openBlock(),createBlock(_sfc_main$4,{battery:e.label,label:n,weapons:e.firingArcs[n],"onUpdate:firingArc":l=>e.firingArcs[n]=l},null,8,["battery","label","weapons","onUpdate:firingArc"]))),256))])):createCommentVNode("",!0)}},FiringDiagramComp=_export_sfc(_sfc_main$3,[["__scopeId","data-v-987af6f5"]]),ConditionComp_vue_vue_type_style_index_0_scoped_c0beb418_lang="",_withScopeId$1=e=>(pushScopeId("data-v-c0beb418"),e=e(),popScopeId(),e),_hoisted_1$1={key:0},_hoisted_2$1=["value"],_hoisted_3$1=_withScopeId$1(()=>createBaseVNode("legend",null,"Firing Arcs",-1)),_sfc_main$2={__name:"ConditionComp",props:{condition:{type:Object,required:!0},label:{type:String,required:!0},maximumVesselEngineRating:{type:Number,required:!0},nextCondition:Object,prevCondition:Object,vesselHullRating:{type:Number,required:!0}},setup(__props){const props=__props,armorRatingGamut=computed(()=>{const e=props.nextCondition?ARMOR_RATING_GAMUT.indexOf(props.nextCondition.armorRating):0,s=props.prevCondition?ARMOR_RATING_GAMUT.indexOf(props.prevCondition.armorRating)+1:ARMOR_RATING_GAMUT.length;return ARMOR_RATING_GAMUT.slice(e,s)}),engineRatingGamut=computed(()=>{const e=props.nextCondition?ENGINE_RATING_GAMUT.indexOf(props.nextCondition.engineRating):0,s=props.prevCondition?ENGINE_RATING_GAMUT.indexOf(props.prevCondition.engineRating):props.maximumVesselEngineRating;return ENGINE_RATING_GAMUT.slice(e,s+1)}),hullCheckboxes=computed(()=>{const ready=Math.ceil(props.vesselHullRating/3),damaged=Math.ceil((props.vesselHullRating-ready)/2);return props.vesselHullRating-ready-damaged,eval(props.label)});return provide("nextCondition",computed(()=>props.nextCondition)),provide("prevCondition",computed(()=>props.prevCondition)),(e,s)=>hullCheckboxes.value?(openBlock(),createElementBlock("fieldset",_hoisted_1$1,[createBaseVNode("legend",null,toDisplayString(__props.label),1),createBaseVNode("label",null,[createTextVNode(" Hull Checkboxes "),createBaseVNode("input",{disabled:"",value:hullCheckboxes.value},null,8,_hoisted_2$1)]),createBaseVNode("label",null,[createTextVNode(" Engine Rating "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>__props.condition.engineRating=o)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(engineRatingGamut.value,o=>(openBlock(),createElementBlock("option",{key:o},toDisplayString(o),1))),128))],512),[[vModelSelect,__props.condition.engineRating]])]),createBaseVNode("label",null,[createTextVNode(" Armor Rating "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>__props.condition.armorRating=o)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(armorRatingGamut.value,o=>(openBlock(),createElementBlock("option",{key:o},toDisplayString(o),1))),128))],512),[[vModelSelect,__props.condition.armorRating]])]),createBaseVNode("fieldset",null,[_hoisted_3$1,(openBlock(!0),createElementBlock(Fragment,null,renderList(__props.condition.firingArcs,(o,a)=>(openBlock(),createBlock(FiringDiagramComp,{key:a,firingArcs:o,label:a},null,8,["firingArcs","label"]))),128))])])):createCommentVNode("",!0)}},ConditionComp=_export_sfc(_sfc_main$2,[["__scopeId","data-v-c0beb418"]]),VesselComp_vue_vue_type_style_index_0_scoped_be3a50d7_lang="",_withScopeId=e=>(pushScopeId("data-v-be3a50d7"),e=e(),popScopeId(),e),_hoisted_1={class:"vessel"},_hoisted_2=["disabled"],_hoisted_3=["label"],_hoisted_4={class:"vessel_eccentricities"},_hoisted_5=_withScopeId(()=>createBaseVNode("legend",null,"Eccentricities",-1)),_hoisted_6=_withScopeId(()=>createBaseVNode("legend",null,"Batteries",-1)),_hoisted_7=["hidden"],_hoisted_8=["hidden"],_sfc_main$1={__name:"VesselComp",props:{id:{type:String,required:!0},vessel:{type:Object,required:!0}},setup(e){const s=e,o=computed(()=>Object.keys(CLASSIFICATIONS).find(n=>Object.keys(CLASSIFICATIONS[n]).includes(s.vessel.type))),a=computed(()=>Object.keys(CLASSIFICATIONS.Colossal).includes(s.vessel.type)),c=computed(()=>Object.keys(CLASSIFICATIONS["Small Craft"]).includes(s.vessel.type)),i=computed(()=>ENGINE_RATING_GAMUT.slice(0,CLASSIFICATIONS[o.value][s.vessel.type].maximumEngineRating+1));return provide("batteries",computed(()=>s.vessel.batteries)),(n,l)=>(openBlock(),createElementBlock("fieldset",_hoisted_1,[createBaseVNode("legend",null,toDisplayString(e.vessel.class||e.id),1),createBaseVNode("label",null,[createTextVNode(" Class "),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=t=>e.vessel.class=t)},null,512),[[vModelText,e.vessel.class]])]),createBaseVNode("label",null,[createTextVNode(" Type "),withDirectives(createBaseVNode("select",{disabled:e.vessel.eccentricities.length,"onUpdate:modelValue":l[1]||(l[1]=t=>e.vessel.type=t)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(CLASSIFICATIONS),(t,r)=>(openBlock(),createElementBlock("optgroup",{label:r},[(openBlock(!0),createElementBlock(Fragment,null,renderList(t,(d,u)=>(openBlock(),createElementBlock("option",null,toDisplayString(u),1))),256))],8,_hoisted_3))),256))],8,_hoisted_2),[[vModelSelect,e.vessel.type]])]),createBaseVNode("button",{type:"button",onClick:l[2]||(l[2]=t=>n.$emit("removeVessel"))},"×"),createBaseVNode("fieldset",_hoisted_4,[_hoisted_5,(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ECCENTRICITIES).Vessel,(t,r)=>(openBlock(),createBlock(_sfc_main$6,{key:r,abbr:r,eccentricity:t,vessel:e.vessel},null,8,["abbr","eccentricity","vessel"]))),128))]),createBaseVNode("fieldset",null,[_hoisted_6,(openBlock(!0),createElementBlock(Fragment,null,renderList(e.vessel.batteries,(t,r)=>(openBlock(),createBlock(_sfc_main$5,{key:r,battery:t,label:r},null,8,["battery","label"]))),128))]),createBaseVNode("fieldset",{hidden:!a.value},[createBaseVNode("legend",null,toDisplayString(o.value),1),createBaseVNode("label",null,[createTextVNode(" Hull Rating "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":l[3]||(l[3]=t=>e.vessel.hullRating=t)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(HULL_RATING_GAMUT),t=>(openBlock(),createElementBlock("option",{key:t},toDisplayString(t),1))),128))],512),[[vModelSelect,e.vessel.hullRating]])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(CONDITIONS),(t,r)=>(openBlock(),createBlock(ConditionComp,{condition:e.vessel.conditions[r],label:r,maximumVesselEngineRating:unref(CLASSIFICATIONS)[o.value][e.vessel.type].maximumEngineRating,nextCondition:e.vessel.conditions[t.nextCondition],prevCondition:e.vessel.conditions[t.prevCondition],vesselHullRating:+e.vessel.hullRating},null,8,["condition","label","maximumVesselEngineRating","nextCondition","prevCondition","vesselHullRating"]))),256))],8,_hoisted_7),createBaseVNode("fieldset",{hidden:!c.value},[createBaseVNode("legend",null,toDisplayString(o.value),1),createBaseVNode("label",null,[createTextVNode(" Size Checkboxes "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":l[4]||(l[4]=t=>e.vessel.sizeCheckboxes=t)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(SIZE_CHECKBOXES_GAMUT),t=>(openBlock(),createElementBlock("option",{key:t},toDisplayString(t),1))),128))],512),[[vModelSelect,e.vessel.sizeCheckboxes]])]),createBaseVNode("label",null,[createTextVNode(" Engine Rating "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":l[5]||(l[5]=t=>e.vessel.engineRating=t)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,t=>(openBlock(),createElementBlock("option",{key:t},toDisplayString(t),1))),128))],512),[[vModelSelect,e.vessel.engineRating]])]),createBaseVNode("label",null,[createTextVNode(" Armor Rating "),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":l[6]||(l[6]=t=>e.vessel.armorRating=t)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ARMOR_RATING_GAMUT),t=>(openBlock(),createElementBlock("option",{key:t},toDisplayString(t),1))),128))],512),[[vModelSelect,e.vessel.armorRating]])])],8,_hoisted_8)]))}},VesselComp=_export_sfc(_sfc_main$1,[["__scopeId","data-v-be3a50d7"]]),_sfc_main={__name:"VesselsView",setup(e){const s=ref(""),o=useVesselsStore();function a(n){Object.keys(o.vessels).includes(n)&&(s.value=n)}function c(){const n=o.addVessel();a(n)}function i(n){o.removeVessel(n),s.value===n&&a(Object.keys(o.vessels)[0])}return(n,l)=>(openBlock(),createElementBlock("main",null,[createBaseVNode("div",null,[createBaseVNode("button",{onClick:l[0]||(l[0]=t=>c())},"Add Vessel")]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o).vessels,(t,r)=>(openBlock(),createBlock(VesselComp,{class:normalizeClass({active:r===s.value}),onClick:d=>a(r),key:r,id:r,vessel:t,onRemoveVessel:d=>i(r)},null,8,["class","onClick","id","vessel","onRemoveVessel"]))),128))]))}};export{_sfc_main as default};
