import{u as z,F as k,W as K,A as x,E as U,a as T,H as X,S as Y}from"./weapon-offensive-potential-97e92331.js";import{u as F,C as E,a as Z,b as J,c as Q,d as N,e as ee}from"./vessels-store-df5c3e84.js";import{u as te,_ as ne}from"./eccentricities-4d16f302.js";import{o as a,c as r,a as i,t as g,b as C,F as v,r as b,u as o,d as h,w as I,i as q,e as d,n as G,f as j,g as _,h as w,p as V,j as D,k as M,l as ae}from"./index-dccb4eeb.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const ie=["value"],le=i("option",{value:""},null,-1),se=["value"],re={__name:"VesselBattery",props:{label:{type:String,required:!0},weaponId:{type:String}},emits:["update:weaponId"],setup(e,{emit:u}){const n=z();return(p,s)=>(a(),r("fieldset",null,[i("legend",null,g(e.label),1),i("label",null,[C(" Weapon "),i("select",{value:e.weaponId,onChange:s[0]||(s[0]=c=>u("update:weaponId",c.target.value))},[le,(a(!0),r(v,null,b(o(n).weapons,(c,t)=>(a(),r("option",{key:t,value:t},g(c.name||t),9,se))),128))],40,ie)])]))}};function ue(e,u,n,p){const s=h(null);return I(()=>{const c=n.value?k.indexOf(n.value.firingArcs[e.value][u.value]):0,t=p.value?k.indexOf(p.value.firingArcs[e.value][u.value])+1:k.length;s.value=k.slice(c,t)}),{firingArcGamut:s}}const oe=["value"],ce={__name:"VesselConditionFiringDiagramArc",props:{battery:{type:String,required:!0},label:{type:String,required:!0},weapons:{type:String,required:!0}},emits:["update:weapons"],setup(e,{emit:u}){const n=e,{firingArcGamut:p}=ue(d(n,"battery"),d(n,"label"),q("nextCondition"),q("prevCondition"));return(s,c)=>(a(),r("label",{class:G(`arc _${e.label.toLowerCase().replace(/\s+/g,"_")}`)},[C(g(e.label)+" ",1),i("select",{value:e.weapons,onChange:c[0]||(c[0]=t=>u("update:weapons",t.target.value))},[(a(!0),r(v,null,b(o(p),t=>(a(),r("option",{key:t},g(t),1))),128))],40,oe)],2))}};const de={key:0,class:"firing_diagram"},ge={__name:"VesselConditionFiringDiagram",props:{firingArcs:{type:Object,required:!0},label:{type:String,required:!0}},setup(e){const u=e,n=j(()=>z().weapons[q("batteries").value[u.label].weaponId]);return(p,s)=>n.value?(a(),r("fieldset",de,[i("legend",null,g(e.label)+" ("+g(n.value.name)+")",1),(a(!0),r(v,null,b(o(K)[n.value.type].firingArcs,c=>(a(),_(ce,{key:c,battery:e.label,label:c,weapons:e.firingArcs[c],"onUpdate:weapons":t=>e.firingArcs[c]=t},null,8,["battery","label","weapons","onUpdate:weapons"]))),128))])):w("",!0)}},pe=O(ge,[["__scopeId","data-v-ea6aa56a"]]);function me(e,u){const n=h(null);return I(()=>{const p=e.value?x.indexOf(e.value.armorRating):0,s=u.value?x.indexOf(u.value.armorRating)+1:x.length;n.value=x.slice(p,s)}),{armorRatingGamut:n}}function B(e,u=h(null),n=h(null)){const{classification:p}=F(e),s=h(null),c=h(null);return I(()=>{try{s.value=U.slice(0,E[p.value][e.value].maximumEngineRating+1)}catch{}}),I(()=>{try{const t=u.value?U.indexOf(u.value.engineRating):0,f=n.value?U.indexOf(n.value.engineRating):E[p.value][e.value].maximumEngineRating;c.value=U.slice(t,f+1)}catch{}}),{engineRatingGamut:c,smallCraftEngineRatingGamut:s}}const Re=e=>(D("data-v-9cdd1bc5"),e=e(),M(),e),ve=["value"],be=["value"],fe=["value"],Ce=Re(()=>i("legend",null,"Firing Arcs",-1)),ye={__name:"VesselCondition",props:{label:{type:String,required:!0},hullCheckboxes:{type:Number,required:!0},nextCondition:Object,prevCondition:Object,type:{type:String,required:!0},engineRating:{type:String,required:!0},armorRating:{type:String,required:!0},firingArcs:{type:Object,required:!0}},emits:["update:engineRating","update:armorRating"],setup(e,{emit:u}){const n=e,{armorRatingGamut:p}=me(d(n,"nextCondition"),d(n,"prevCondition")),{engineRatingGamut:s}=B(d(n,"type"),d(n,"nextCondition"),d(n,"prevCondition"));return V("nextCondition",d(n,"nextCondition")),V("prevCondition",d(n,"prevCondition")),(c,t)=>e.hullCheckboxes?(a(),r("fieldset",{key:0,class:G(`condition _${e.label.toLowerCase().replace(/\s+/g,"_")}`)},[i("legend",null,g(e.label),1),i("label",null,[C(" Hull Checkboxes "),i("input",{disabled:"",value:e.hullCheckboxes},null,8,ve)]),i("label",null,[C(" Engine Rating "),i("select",{value:e.engineRating,onChange:t[0]||(t[0]=f=>u("update:engineRating",f.target.value))},[(a(!0),r(v,null,b(o(s),f=>(a(),r("option",{key:f},g(f),1))),128))],40,be)]),i("label",null,[C(" Armor Rating "),i("select",{value:e.armorRating,onChange:t[1]||(t[1]=f=>u("update:armorRating",f.target.value))},[(a(!0),r(v,null,b(o(p),f=>(a(),r("option",{key:f},g(f),1))),128))],40,fe)]),i("fieldset",null,[Ce,(a(!0),r(v,null,b(e.firingArcs,(f,A)=>(a(),_(pe,{key:A,firingArcs:f,label:A},null,8,["firingArcs","label"]))),128))])],2)):w("",!0)}},he=O(ye,[["__scopeId","data-v-9cdd1bc5"]]);const H=e=>(D("data-v-7f1a38c4"),e=e(),M(),e),_e={class:"vessel"},xe=["value"],Ae=["disabled","value"],Se=["label"],ke={class:"vessel_eccentricities"},Ue=H(()=>i("legend",null,"Eccentricities",-1)),Ie={class:"vessel_batteries"},we=H(()=>i("legend",null,"Batteries",-1)),Ee={key:0,class:"vessel_conditions"},qe=["value"],Ve={key:1,class:"small_craft_values"},Ge=["value"],Oe=["value"],$e=["value"],Te={__name:"Vessel",props:{id:{type:String,required:!0},class:{type:String,required:!0},type:{type:String,required:!0},eccentricities:{type:Array,required:!0},batteries:{type:Object,required:!0},hullRating:{type:String,required:!0},conditions:{type:Object,required:!0},sizeCheckboxes:{type:String,required:!0},engineRating:{type:String,required:!0},armorRating:{type:String,required:!0}},emits:["remove:vessel","update:class","update:type","update:hullRating","update:sizeCheckboxes","update:engineRating","update:armorRating"],setup(e,{emit:u}){const n=e,{classification:p,isColossal:s,isSmallCraft:c}=F(d(n,"type")),{defensiveRating:t}=Z(d(n,"type"),d(n,"hullRating"),d(n,"conditions"),d(n,"sizeCheckboxes"),d(n,"armorRating"),d(n,"eccentricities")),{enabledEccentricities:f,toggleEccentricity:A}=te(ae(n),T.Vessel),{smallCraftEngineRatingGamut:L}=B(d(n,"type")),{hullCheckboxes:W}=J(d(n,"hullRating")),{offensiveRating:$}=Q(d(n,"hullRating"),d(n,"batteries"),d(n,"conditions")),P=j(()=>Math.round(Math.sqrt($.value*t.value)));return V("batteries",d(n,"batteries")),(ze,m)=>(a(),r("fieldset",_e,[i("legend",null,g(this.class||e.id),1),i("label",null,[C(" Class "),i("input",{value:e.class,onInput:m[0]||(m[0]=l=>u("update:class",l.target.value))},null,40,xe)]),i("label",null,[C(" Type "),i("select",{disabled:e.eccentricities.length,value:e.type,onChange:m[1]||(m[1]=l=>u("update:type",l.target.value))},[(a(!0),r(v,null,b(o(E),(l,R)=>(a(),r("optgroup",{key:R,label:R},[(a(!0),r(v,null,b(l,(y,S)=>(a(),r("option",{key:S},g(S),1))),128))],8,Se))),128))],40,Ae)]),i("button",{type:"button",onClick:m[2]||(m[2]=l=>u("remove:vessel",e.id))},"Ã—"),i("span",null,"DRAT: "+g(o(t)),1),i("span",null,"ORAT: "+g(o($)),1),i("span",null,"CRAT: "+g(P.value),1),i("fieldset",ke,[Ue,(a(!0),r(v,null,b(o(T).Vessel,(l,R)=>(a(),_(ne,{key:R,abbr:R,checked:e.eccentricities.includes(R),disabled:!o(f)[R],eccentricity:l,"onUpdate:eccentricity":m[3]||(m[3]=(y,S)=>o(A)(y,S))},null,8,["abbr","checked","disabled","eccentricity"]))),128))]),i("fieldset",Ie,[we,(a(!0),r(v,null,b(e.batteries,(l,R)=>(a(),_(re,{key:R,label:R,weaponId:l.weaponId,"onUpdate:weaponId":y=>l.weaponId=y},null,8,["label","weaponId","onUpdate:weaponId"]))),128))]),o(s)?(a(),r("fieldset",Ee,[i("legend",null,g(o(p)),1),i("label",null,[C(" Hull Rating "),i("select",{value:e.hullRating,onChange:m[4]||(m[4]=l=>u("update:hullRating",l.target.value))},[(a(!0),r(v,null,b(o(X),l=>(a(),r("option",{key:l},g(l),1))),128))],40,qe)]),(a(!0),r(v,null,b(e.conditions,(l,R)=>(a(),_(he,{key:R,label:R,hullCheckboxes:o(W)[R],nextCondition:e.conditions[o(N)[R].nextCondition],prevCondition:e.conditions[o(N)[R].prevCondition],type:e.type,engineRating:l.engineRating,"onUpdate:engineRating":y=>l.engineRating=y,armorRating:l.armorRating,"onUpdate:armorRating":y=>l.armorRating=y,firingArcs:l.firingArcs,"onUpdate:firingArcs":y=>l.firingArcs=y},null,8,["label","hullCheckboxes","nextCondition","prevCondition","type","engineRating","onUpdate:engineRating","armorRating","onUpdate:armorRating","firingArcs","onUpdate:firingArcs"]))),128))])):w("",!0),o(c)?(a(),r("fieldset",Ve,[i("legend",null,g(o(p)),1),i("label",null,[C(" Size Checkboxes "),i("select",{value:e.sizeCheckboxes,onChange:m[5]||(m[5]=l=>u("update:sizeCheckboxes",l.target.value))},[(a(!0),r(v,null,b(o(Y),l=>(a(),r("option",{key:l},g(l),1))),128))],40,Ge)]),i("label",null,[C(" Engine Rating "),i("select",{value:e.engineRating,onChange:m[6]||(m[6]=l=>u("update:engineRating",l.target.value))},[(a(!0),r(v,null,b(o(L),l=>(a(),r("option",{key:l},g(l),1))),128))],40,Oe)]),i("label",null,[C(" Armor Rating "),i("select",{value:e.armorRating,onChange:m[7]||(m[7]=l=>u("update:armorRating",l.target.value))},[(a(!0),r(v,null,b(o(x),l=>(a(),r("option",{key:l},g(l),1))),128))],40,$e)])])):w("",!0)]))}},Ne=O(Te,[["__scopeId","data-v-7f1a38c4"]]),He={__name:"VesselsView",setup(e){const u=ee();return(n,p)=>(a(),r("main",null,[i("div",null,[i("button",{onClick:p[0]||(p[0]=s=>o(u).addVessel())},"Add Vessel")]),(a(!0),r(v,null,b(o(u).vessels,(s,c)=>(a(),_(Ne,{key:c,id:c,class:G(s.class),"onUpdate:class":t=>s.class=t,type:s.type,"onUpdate:type":t=>s.type=t,eccentricities:s.eccentricities,"onUpdate:eccentricities":t=>s.eccentricities=t,batteries:s.batteries,"onUpdate:batteries":t=>s.batteries=t,hullRating:s.hullRating,"onUpdate:hullRating":t=>s.hullRating=t,conditions:s.conditions,"onUpdate:conditions":t=>s.conditions=t,sizeCheckboxes:s.sizeCheckboxes,"onUpdate:sizeCheckboxes":t=>s.sizeCheckboxes=t,engineRating:s.engineRating,"onUpdate:engineRating":t=>s.engineRating=t,armorRating:s.armorRating,"onUpdate:armorRating":t=>s.armorRating=t,"onRemove:vessel":t=>o(u).removeVessel(t)},null,8,["id","class","onUpdate:class","type","onUpdate:type","eccentricities","onUpdate:eccentricities","batteries","onUpdate:batteries","hullRating","onUpdate:hullRating","conditions","onUpdate:conditions","sizeCheckboxes","onUpdate:sizeCheckboxes","engineRating","onUpdate:engineRating","armorRating","onUpdate:armorRating","onRemove:vessel"]))),128))]))}};export{He as default};
