import{a as y,o as l,c as u,b as t,d as p,w as c,v as f,F as s,r as g,t as R,u as B,j as M,f as x,g as U,h as O,k as S,n as V}from"./index-00a3319d.js";import{R as W,b as A,D as C,P as k,c as T,W as b,a as G,u as N}from"./weapons-store-5a1b3acd.js";import{_ as F}from"./EccentricityComp-8867b77a.js";import{_ as I}from"./_plugin-vue_export-helper-c27b6911.js";const j=t("legend",null,"Range Band",-1),D={__name:"RangeBandComp",props:{maximumWeaponRange:{type:Number,required:!0},nextRangeBand:Object,prevRangeBand:Object,rangeBand:{type:Object,required:!0}},setup(n){const o=n,i=y(()=>{const d=o.nextRangeBand?+o.nextRangeBand.minimumRange-1:o.maximumWeaponRange;return Array.from({length:Math.abs(d-+o.rangeBand.minimumRange)+1},(a,e)=>e+ +o.rangeBand.minimumRange)}),v=y(()=>{const d=o.prevRangeBand?+o.prevRangeBand.maximumRange+1:+T[0];return Array.from({length:Math.abs(+o.rangeBand.maximumRange-d)+1},(a,e)=>e+d)});return(d,a)=>(l(),u("fieldset",null,[j,t("label",null,[p(" Minimum Range "),c(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.rangeBand.minimumRange=e)},[(l(!0),u(s,null,g(v.value,e=>(l(),u("option",null,R(e),1))),256))],512),[[f,n.rangeBand.minimumRange]])]),t("label",null,[p(" Maximum Range "),c(t("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.rangeBand.maximumRange=e)},[(l(!0),u(s,null,g(i.value,e=>(l(),u("option",null,R(e),1))),256))],512),[[f,n.rangeBand.maximumRange]])]),t("label",null,[p(" Rate of Fire "),c(t("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.rangeBand.rateOfFire=e)},[(l(!0),u(s,null,g(B(W),e=>(l(),u("option",null,R(e),1))),256))],512),[[f,n.rangeBand.rateOfFire]])]),t("label",null,[p(" Accuracy "),c(t("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.rangeBand.accuracy=e)},[(l(!0),u(s,null,g(B(A),e=>(l(),u("option",null,R(e),1))),256))],512),[[f,n.rangeBand.accuracy]])]),t("label",null,[p(" Damage "),c(t("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.rangeBand.damage=e)},[(l(!0),u(s,null,g(B(C),e=>(l(),u("option",null,R(e),1))),256))],512),[[f,n.rangeBand.damage]])]),t("label",null,[p(" Penetration "),c(t("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>n.rangeBand.penetration=e)},[(l(!0),u(s,null,g(B(k),e=>(l(),u("option",null,R(e),1))),256))],512),[[f,n.rangeBand.penetration]])]),t("button",{type:"button",onClick:a[6]||(a[6]=e=>d.$emit("removeRangeBand"))},"×")]))}};class P{constructor(o=T[0]){this.minimumRange=`${o}`,this.maximumRange=`${o}`,this.rateOfFire=W[0],this.accuracy=A[0],this.damage=C[0],this.penetration=k[0]}}const $=n=>(U("data-v-1894347a"),n=n(),O(),n),h={class:"weapon"},q=["disabled"],Y=$(()=>t("legend",null,"Range Bands",-1)),z=["disabled"],L={class:"weapon_eccentricities"},H=$(()=>t("legend",null,"Eccentricities",-1)),J={__name:"WeaponComp",props:{id:{type:String,required:!0},weapon:{type:Object,required:!0}},setup(n){const o=n,i=y(()=>{let a=Math.max(0,...o.weapon.rangeBands.map(e=>+e.maximumRange))+1;return(o.weapon.rangeBands.length>2||a>b[o.weapon.type].maximumRange)&&(a=!1),a});function v(){const a=i.value;a&&o.weapon.rangeBands.push(new P(a))}function d(a){o.weapon.rangeBands.splice(+a,1)}return(a,e)=>(l(),u("fieldset",h,[t("legend",null,R(n.weapon.name||n.id),1),t("label",null,[p(" Name "),c(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>n.weapon.name=r)},null,512),[[M,n.weapon.name]])]),t("label",null,[p(" Type "),c(t("select",{disabled:n.weapon.rangeBands.length,"onUpdate:modelValue":e[1]||(e[1]=r=>n.weapon.type=r)},[(l(!0),u(s,null,g(B(b),(r,m)=>(l(),u("option",null,R(m),1))),256))],8,q),[[f,n.weapon.type]])]),t("button",{type:"button",onClick:e[2]||(e[2]=r=>a.$emit("removeWeapon"))},"×"),t("fieldset",null,[Y,t("button",{disabled:!i.value,onClick:e[3]||(e[3]=r=>v())},"Add Range Band",8,z),(l(!0),u(s,null,g(n.weapon.rangeBands,(r,m)=>(l(),x(D,{key:m,maximumWeaponRange:B(b)[n.weapon.type].maximumRange,nextRangeBand:n.weapon.rangeBands[m+1],prevRangeBand:n.weapon.rangeBands[m-1],rangeBand:r,onRemoveRangeBand:w=>d(m)},null,8,["maximumWeaponRange","nextRangeBand","prevRangeBand","rangeBand","onRemoveRangeBand"]))),128))]),t("fieldset",L,[H,(l(!0),u(s,null,g(B(G).Weapon,(r,m)=>(l(),x(F,{key:m,abbr:m,eccentricity:r,weapon:n.weapon},null,8,["abbr","eccentricity","weapon"]))),128))])]))}},K=I(J,[["__scopeId","data-v-1894347a"]]),ee={__name:"WeaponsView",setup(n){const o=S(""),i=N();function v(e){console.log(e),Object.keys(i.weapons).includes(e)&&(o.value=e)}function d(){const e=i.addWeapon();v(e)}function a(e){i.removeWeapon(e),o.value===e&&v(Object.keys(i.weapons)[0])}return(e,r)=>(l(),u("main",null,[t("div",null,[t("button",{onClick:r[0]||(r[0]=m=>d())},"Add Weapon")]),(l(!0),u(s,null,g(B(i).weapons,(m,w)=>(l(),x(K,{class:V({active:w===o.value}),onClick:E=>v(w),key:w,id:w,weapon:m,onRemoveWeapon:E=>a(w)},null,8,["class","onClick","id","weapon","onRemoveWeapon"]))),128))]))}};export{ee as default};
